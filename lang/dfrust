# -*- mode: dockerfile -*-
#
# Rust language
#
# Copyright (c) <year-of-creation> <your-name>
# Licensed to you under the MIT License.
# See the LICENSE file in the project root for more information.
#
FROM onspot/devlab:3.0

USER root

RUN zypper -n install -t pattern devel_C_C++ && zypper -n install cmake gcc-c++
RUN echo "pupdate ~/.cargo/bin" >> /etc/zsh.zshrc.local

USER dev
WORKDIR /home/dev

RUN curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y
ENV PATH=/home/dev/.cargo/bin:${PATH}

# Create these variables so that programs running inside the containers know
# what language they can make use of.
ENV DEVLABLANG=${LANG}

RUN rustup component add rust-src && cargo install evcxr_jupyter && \
    evcxr_jupyter --install